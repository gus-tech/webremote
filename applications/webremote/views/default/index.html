{{left_sidebar_enabled,right_sidebar_enabled=False,('message' in globals())}}
{{extend 'layout.html'}}

<input id="code_box" type="text">
<input type="button" onclick="exampleSocket.send($('#code_box').val());" value="Socket">
<script>
    var exampleSocket
    var codes = {}
    codes['enter'] = [1, 165, 0, 214, 0, 25, 0, 30, 0, 23, 0, 30, 0, 23, 0, 30, 0, 23, 0, 30, 0, 23, 0, 30, 0, 23, 0, 30, 0, 23, 0, 80, 0, 25, 0, 30, 0, 23, 0, 80, 0, 25, 0, 79, 0, 25, 0, 79, 0, 25, 0, 79, 0, 25, 0, 80, 0, 25, 0, 79, 0, 25, 0, 30, 0, 23, 0, 79, 0, 25, 0, 30, 0, 23, 0, 79, 0, 25, 0, 30, 0, 23, 0, 80, 0, 25, 0, 30, 0, 23, 0, 30, 0, 23, 0, 30, 0, 23, 0, 30, 0, 23, 0, 80, 0, 25, 0, 30, 0, 23, 0, 79, 0, 25, 0, 30, 0, 23, 0, 80, 0, 25, 0, 80, 0, 25, 0, 80, 0, 25, 0, 80, 0, 25, 255, 255]
    codes['menu'] = [1, 165, 0, 214, 0, 25, 0, 30, 0, 23, 0, 30, 0, 23, 0, 30, 0, 23, 0, 30, 0, 23, 0, 30, 0, 23, 0, 30, 0, 23, 0, 80, 0, 25, 0, 30, 0, 23, 0, 80, 0, 25, 0, 79, 0, 25, 0, 79, 0, 25, 0, 79, 0, 25, 0, 79, 0, 25, 0, 79, 0, 25, 0, 30, 0, 23, 0, 79, 0, 25, 0, 79, 0, 25, 0, 79, 0, 25, 0, 30, 0, 23, 0, 79, 0, 25, 0, 79, 0, 25, 0, 30, 0, 23, 0, 79, 0, 25, 0, 30, 0, 23, 0, 30, 0, 23, 0, 31, 0, 23, 0, 79, 0, 25, 0, 30, 0, 23, 0, 30, 0, 23, 0, 80, 0, 25, 0, 30, 0, 23, 0, 79, 0, 25, 255, 255]
    codes['up'] = [1, 165, 0, 214, 0, 24, 0, 30, 0, 23, 0, 31, 0, 23, 0, 31, 0, 23, 0, 31, 0, 23, 0, 31, 0, 23, 0, 31, 0, 23, 0, 80, 0, 24, 0, 30, 0, 23, 0, 80, 0, 24, 0, 80, 0, 24, 0, 80, 0, 24, 0, 80, 0, 24, 0, 80, 0, 24, 0, 80, 0, 24, 0, 31, 0, 23, 0, 80, 0, 24, 0, 80, 0, 24, 0, 30, 0, 23, 0, 31, 0, 23, 0, 80, 0, 25, 0, 80, 0, 24, 0, 30, 0, 23, 0, 31, 0, 23, 0, 31, 0, 23, 0, 31, 0, 22, 0, 81, 0, 25, 0, 80, 0, 24, 0, 30, 0, 23, 0, 31, 0, 23, 0, 80, 0, 24, 0, 80, 0, 24, 0, 80, 0, 24, 7, 67, 1, 165, 0, 108, 0, 24, 255, 255]
    codes['down'] = [1, 165, 0, 215, 0, 24, 0, 30, 0, 23, 0, 30, 0, 23, 0, 30, 0, 23, 0, 30, 0, 23, 0, 31, 0, 23, 0, 31, 0, 23, 0, 80, 0, 25, 0, 30, 0, 23, 0, 80, 0, 25, 0, 80, 0, 25, 0, 79, 0, 25, 0, 80, 0, 25, 0, 79, 0, 25, 0, 80, 0, 25, 0, 30, 0, 23, 0, 80, 0, 25, 0, 80, 0, 25, 0, 30, 0, 23, 0, 80, 0, 25, 0, 80, 0, 24, 0, 80, 0, 25, 0, 30, 0, 23, 0, 30, 0, 23, 0, 30, 0, 23, 0, 30, 0, 23, 0, 80, 0, 25, 0, 30, 0, 23, 0, 30, 0, 23, 0, 31, 0, 23, 0, 80, 0, 25, 0, 80, 0, 25, 0, 79, 0, 25, 255, 255]
    codes['left'] = [1, 165, 0, 214, 0, 25, 0, 30, 0, 23, 0, 30, 0, 23, 0, 31, 0, 23, 0, 31, 0, 23, 0, 30, 0, 23, 0, 30, 0, 23, 0, 79, 0, 25, 0, 29, 0, 24, 0, 80, 0, 25, 0, 80, 0, 25, 0, 80, 0, 24, 0, 80, 0, 24, 0, 80, 0, 25, 0, 80, 0, 25, 0, 30, 0, 23, 0, 80, 0, 25, 0, 29, 0, 24, 0, 80, 0, 25, 0, 79, 0, 25, 0, 29, 0, 24, 0, 29, 0, 24, 0, 30, 0, 24, 0, 79, 0, 25, 0, 29, 0, 24, 0, 80, 0, 25, 0, 30, 0, 23, 0, 30, 0, 23, 0, 80, 0, 25, 0, 79, 0, 25, 0, 79, 0, 25, 0, 30, 0, 23, 0, 80, 0, 25, 255, 255]
    codes['right'] = [1, 165, 0, 215, 0, 24, 0, 30, 0, 23, 0, 30, 0, 23, 0, 31, 0, 23, 0, 31, 0, 23, 0, 31, 0, 23, 0, 31, 0, 23, 0, 80, 0, 24, 0, 30, 0, 23, 0, 81, 0, 24, 0, 80, 0, 24, 0, 80, 0, 25, 0, 80, 0, 25, 0, 80, 0, 25, 0, 80, 0, 24, 0, 30, 0, 23, 0, 80, 0, 25, 0, 80, 0, 24, 0, 80, 0, 24, 0, 80, 0, 25, 0, 30, 0, 23, 0, 31, 0, 23, 0, 31, 0, 23, 0, 80, 0, 24, 0, 30, 0, 23, 0, 30, 0, 23, 0, 30, 0, 23, 0, 31, 0, 23, 0, 80, 0, 24, 0, 80, 0, 25, 0, 79, 0, 25, 0, 30, 0, 23, 0, 81, 0, 24, 7, 66, 1, 165, 0, 108, 0, 25, 255, 255]
    codes['power'] = [1, 165, 0, 213, 0, 26, 0, 29, 0, 24, 0, 29, 0, 24, 0, 29, 0, 24, 0, 29, 0, 24, 0, 29, 0, 24, 0, 29, 0, 24, 0, 79, 0, 26, 0, 29, 0, 24, 0, 79, 0, 26, 0, 78, 0, 26, 0, 78, 0, 26, 0, 79, 0, 25, 0, 79, 0, 25, 0, 79, 0, 26, 0, 29, 0, 24, 0, 79, 0, 26, 0, 29, 0, 24, 0, 79, 0, 26, 0, 29, 0, 24, 0, 29, 0, 24, 0, 79, 0, 26, 0, 29, 0, 24, 0, 29, 0, 24, 0, 29, 0, 24, 0, 79, 0, 26, 0, 29, 0, 24, 0, 79, 0, 26, 0, 79, 0, 26, 0, 29, 0, 24, 0, 79, 0, 26, 0, 79, 0, 26, 0, 79, 0, 26, 7, 65, 1, 166, 0, 107, 0, 26, 255, 255]
    codes['vol_up'] = [1, 165, 0, 214, 0, 25, 0, 29, 0, 24, 0, 29, 0, 24, 0, 30, 0, 24, 0, 30, 0, 24, 0, 30, 0, 24, 0, 30, 0, 24, 0, 79, 0, 25, 0, 29, 0, 24, 0, 80, 0, 25, 0, 79, 0, 25, 0, 80, 0, 25, 0, 79, 0, 25, 0, 79, 0, 25, 0, 79, 0, 25, 0, 29, 0, 24, 0, 80, 0, 25, 0, 29, 0, 24, 0, 80, 0, 24, 0, 29, 0, 24, 0, 79, 0, 25, 0, 80, 0, 25, 0, 29, 0, 24, 0, 29, 0, 24, 0, 29, 0, 24, 0, 80, 0, 25, 0, 29, 0, 24, 0, 80, 0, 25, 0, 29, 0, 24, 0, 29, 0, 24, 0, 80, 0, 25, 0, 80, 0, 25, 0, 79, 0, 25, 7, 65, 1, 166, 0, 107, 0, 25, 255, 255]
    codes['vol_down'] = [1, 164, 0, 215, 0, 25, 0, 29, 0, 25, 0, 29, 0, 25, 0, 29, 0, 25, 0, 29, 0, 25, 0, 30, 0, 24, 0, 29, 0, 25, 0, 79, 0, 25, 0, 29, 0, 25, 0, 79, 0, 25, 0, 79, 0, 25, 0, 79, 0, 25, 0, 79, 0, 25, 0, 79, 0, 25, 0, 79, 0, 25, 0, 29, 0, 25, 0, 79, 0, 25, 0, 30, 0, 23, 0, 80, 0, 25, 0, 79, 0, 25, 0, 79, 0, 25, 0, 79, 0, 25, 0, 30, 0, 23, 0, 30, 0, 23, 0, 30, 0, 23, 0, 79, 0, 25, 0, 30, 0, 23, 0, 30, 0, 23, 0, 30, 0, 23, 0, 30, 0, 23, 0, 79, 0, 25, 0, 79, 0, 25, 0, 79, 0, 25, 7, 66, 1, 165, 0, 108, 0, 25, 255, 255]

    codes_bt = {}
    codes_bt['up'] = 0x0E
    codes_bt['down'] = 0x0C
    codes_bt['left'] = 0x0B
    codes_bt['right'] = 0x07
    codes_bt['enter'] = 0x0A
    codes_bt['exit'] = 0x1B



    
    function send(type, key, codes){
        if(exampleSocket.readyState == 1){
            console.log(codes[key])
            data = {}
            data[type] = codes[key]
            exampleSocket.send(JSON.stringify(data));
        }
    }
     $(document).ready(function(){
        exampleSocket = $.web2py.web2py_websocket("ws://webremote.gus.tech:8888/realtime/");
        exampleSocket.onmessage = function(event){console.log(event.data);}
        console.log(exampleSocket.readyState)
     });

    $(document).on("keydown", function(e){
        var char = String.fromCharCode(e.which)
        console.log(char +" - "+ e)
        switch(e.which){
            /*
            case 27: send('ir', 'power', codes); break;
            case 13: send('ir', 'enter', codes); break;
            case 16: send('ir', 'menu', codes); break;
            case 38: send('ir', 'up', codes); break;
            case 40: send('ir', 'down', codes); break;
            case 37: send('ir', 'left', codes); break;
            case 39: send('ir', 'right', codes); break;
            case 189: send('ir', 'vol_down', codes); break;
            case 187: send('ir', 'vol_up', codes); break;
            */
            case 8:   send('bt', 'exit', codes_bt); break;
            case 27:  send('bt', 'power', codes_bt); break;
            case 13:  send('bt', 'enter', codes_bt); break;
            case 16:  send('bt', 'menu', codes_bt); break;
            case 38:  send('bt', 'up', codes_bt); break;
            case 40:  send('bt', 'down', codes_bt); break;
            case 37:  send('bt', 'left', codes_bt); break;
            case 39:  send('bt', 'right', codes_bt); break;
            case 189: send('bt', 'vol_down', codes_bt); break;
            case 187: send('bt', 'vol_up', codes_bt); break;


        }
    });
</script>
